<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de CNPJ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        input[type="text"], button {
            padding: 10px;
            font-size: 16px;
            margin: 5px;
        }
        #resultado {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            display: none;
        }
    </style>
</head>
<body>
    <h1>Consulta de CNPJ</h1>
    <label for="cnpj">Digite o CNPJ:</label>
    <input type="text" id="cnpj" placeholder="Ex: 12.345.678/0001-90" maxlength="18">
    <button onclick="consultarCNPJ()">Consultar</button>
    
    <div id="resultado">
        <h2>Dados da Empresa</h2>
        <p id="razao-social"></p>
        <p id="nome-fantasia"></p>
        <p id="situacao"></p>
        <p id="logradouro"></p>
        <p id="bairro"></p>
        <p id="municipio"></p>
        <p id="uf"></p>
    </div>

    <script>
        async function consultarCNPJ() {
            const cnpj = document.getElementById("cnpj").value.replace(/[^\d]+/g, '').trim();

            if (cnpj.length !== 14) {
                alert("Por favor, insira um CNPJ válido com 14 dígitos.");
                return;
            }

            try {
                const response = await fetch(`https://publica.cnpj.ws/cnpj/${cnpj}`);
                if (!response.ok) throw new Error("CNPJ não encontrado.");
                const data = await response.json();

                if (!data) {
                    alert("CNPJ não encontrado.");
                    return;
                }

                document.getElementById("razao-social").innerText = `Razão Social: ${data.razao_social}`;
                document.getElementById("nome-fantasia").innerText = `Nome Fantasia: ${data.estabelecimento.nome_fantasia}`;
                document.getElementById("situacao").innerText = `Situação: ${data.estabelecimento.situacao}`;
                document.getElementById("logradouro").innerText = `Endereço: ${data.estabelecimento.logradouro}, ${data.estabelecimento.numero}`;
                document.getElementById("bairro").innerText = `Bairro: ${data.estabelecimento.bairro}`;
                document.getElementById("municipio").innerText = `Município: ${data.estabelecimento.cidade.nome}`;
                document.getElementById("uf").innerText = `Estado: ${data.estabelecimento.estado.sigla}`;
                document.getElementById("resultado").style.display = "block";
            } catch (error) {
                alert(error.message);
            }
        }
    </script>
</body>
</html>
